# 2024年1月30_SRE活動

## 時間

13:00-14:30(1.5h)

## やること

- 「暗記する」戦略思考（高松　智史)を読んだ結果を踏まえ、次の自分の案件の課題を分析してみる

## 備忘録

- クライアントは、以下のような課題感から、SREロールの人材を探している。今回、外部から業務委託のエンジニアを雇用することを検討し出した。
  - 難しくはないが、特集性をキャッチアップすることが割に合わないと感じて既存のメンバーから敬遠されている。
    - 特殊な知識が必要な少し古いタイプのシステム構成がネックになっている
  - 主力製品に優秀な人材を投下したせいで、今回の募集の対象プロダクトの保守は疎かになっている
    - プロパーも何名かアサインされている。
    　  - しかし、実際には現メンバーが経験不足・能力不足等で、課題に対して能動的に取り組むことができないでいる
    　　    - 定石がわからない, 目標が上手く具体化できない, 原因や対策などを言語化して伝えることが苦手
　　　 - しかし、SRE以外の役割を兼務していたり、他のプロダクトを掛け持ちしている
　　　 - 本来であれば、社内のメンバーで賄えることがベスト。
　    - 誰かに手引きをしてほしい（一度手引きをされれば真似てできる）
   - 既存のプログラムの作りに複雑さ・煩雑さがあり、改善を実行に移すことができずにいる
    - 原因や対策などを言語化して伝えることが苦手, 現実的な工数感で見積もることができない
- そのような状況でたまたま提案された人材（＝自分）が、適材適所に感じられた。
   - とりあえずなんでもやってくれる人が欲しい。既存のサービス運用を丸投げし、新しいサービスの開発に専念したい。
- 当面の課題感としては、セキュリティ・パフォーマンス・運用面の改善をしたり顧客満足度を高めたいことがいくつかある。
- それ以外にはどのような課題間があるだろうか。これまでの情報からシステム構成や運用面の特徴となる性質を考えてみる。
  - サービスを導入してるクライアントアプリが３００アプリ以上あると聞く
    - 本番環境はクライアントごとにテナントが分かれている？
    - いや、そこまで精度の高い構成なのにSREを外注するか？
      - 本番とテスト環境ぐらいは区別されているかもしれないが、最悪アカウントは１つだけかもしれない
  - AWSアカウント内のシステム構成で考えてみる
    - 古いシステムだから意外と１テナントかもしれない(
    - 構成的にはAPIエンドポイントが全体で１つ、ロードバランサに紐づけて、クライアントアプリに対応するサーバグループを複数管理してるイメージ?
      - 何条件で？ホスト？ヘッダ？パス？クエリ文字列
        - ホスト名の可能性が高そう。契約（アカウント）単位でホスト名を払い出してるかもしれない。
  - ドキュメントがないと話していた
    - 全体システム構成図、アプリケーションのREADME（環境構築やデプロイ）、サポートに載ってるレベルのAPI仕様書(swagger)、テスト方法・テストコード、性能上限、メンテナンス手順、処理シーケンス図などか？
  - アプリケーションリポジトリの構成は？Web APIをPython実装してるという
    - フレームワークは？Flask？Django？
      - 多分Django https://www.djangoproject.com/ https://msiz07-flask-docs-ja.readthedocs.io/ja/latest/ https://eightify.app/ja/summary/web-development/comparing-fastapi-django-and-flask-which-is-the-best-python-web-framework
      - アプリから呼ばれるAPI。ダウンタイムの実質要件が厳しく設定されてるかもしれない。ダウンタイムなしでメンテすることを前提とした計画はポイントになるかも。
  - DBは何を使っているのだろうか。
    - サポートページのドキュメント内で「Mongo Query Language」というワードを見かけた https://docs.fanship.jp/mapi/filter.html
      - これのことか? https://www.mongodb.com/docs/manual/tutorial/query-documents/
    - 一般的なWebの広告・配信システムの機能セットが目立つ。おそらくRDBも利用していると思われる。
      - 配信予約
      - クーポン
      - ユーザ情報
      - クライアント（契約)

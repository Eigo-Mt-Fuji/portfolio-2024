# 生成AIとの付き合い方を考える

## 時間

- 10/19 14:00-15:00(1h)

## 目次

- AI駆動開発とは一体どのようなものか。

## 結論

## 備忘録

- AI駆動開発へはいくつも道があり、どのレベルのシフトを行なっていくかを選択して段階に進めることができる
- 何を持ってAI駆動開発とするかの定義は、利用者ごとに、また、タイミングによって違う。
- そもそもAI駆動開発を行うことでメリットを享受する利用者と、そうでない利用者がいることが想定される
- ここでは仮にAI駆動開発を極めた場合に、その成果の提供先となる見込み顧客をイメージしつつ、自分個人としては、エンジニアとして、メリットを最大限活かす方向に思考を掘り下げてみたい。
- 提供先となる見込み顧客については、生成AIの普及傾向と、これまでの自分自身の社会経験から考えて、自分の立場で、見込み客となるユーザを時間をかけて分類する必要はないように思う。
  - 経営者も、経営者が運営する企業も、企業内の個人も、日常利用といえばほぼ全員から使っていると返ってくる可能性がある。普通に使えている人に支援など必要ないとも思う。
  - 実際は３割は支援など必要ないほど積極利用しているし、７割は使っていないか活用レベルが曖昧（相対的に見て、使いこなせていない）と推測するが、おいそれと事実確認は行えない
  - 顧客になりそうな人物像とそうでない人物像の２つに分けて、支援ポイントを関連づけておくにとどめる
    - AI駆動開発をの顧客になりそうな人物像（法人像）は
        - 自分では効果的に使うことができない人たち（生成AI系ツールの導入支援・模範利用）
            - 基礎能力が不足していて効果的に使うことができない
            - メリットより感情を優先している
            - 食わず嫌い
        - 生成AIの利用に後ろ向きではないけど、当事者の意向に反して生成AIの潜在的リスクがメリットを上回る人たち（組織内リスク排除・適切なユースケースでの利用を支援）
            - リストラのリスク
            - ハルシネーションによる混乱や事実誤認で逆に組織的生産性が低下するリスク
            - 生成AIソリューションを活用するためのリテラシー不足
        - 逆に生成AIを十分効果的に活用しているし適用領域もあっていて一見して支援などは必要ない利用者（得意領域を活かした集中と選択の支援）
    - AI駆動開発をの顧客ではなさそうな人物像（法人像）は
        - 規制業種。特にシステムの振る舞いに命がかかっている業種では、利用に消極的にならざるを得ない人（ぶっちゃけ個人では手に負えない）
        - 既得権益を持つ人たちで、存在価値＝既存のシステムと雇用の安定になっているなど、AIによる生産性向上を歓迎しない人（ぶっちゃけ個人では手に負えない）
- AI駆動開発の具体的なアプローチの前に、そもそも享受したいメリットはなんだったかを再確認する
    - 効率の飛躍的向上:
        - 繰り返し作業や管理タスクの多くをAIが担うことで、開発速度が大幅に向上します。場合によっては管理タスクそのものがなくなるケースも発生します。
    - 品質の一貫性:
        - AIによる継続的なチェックとサポートにより、高品質なコードの一貫した生産が可能になります。
    - 創造性の解放:
        - 開発者は管理業務から解放され、より創造的な問題解決に集中できるようになります。
    - スケーラビリティの向上:
        - プロジェクトの規模が拡大しても、AIのサポートにより管理の複雑さが抑制されます。
- AI駆動開発に興味があるとはいえ、得意分野での勝負が大前提。これまで考えた勝ち確率を最大化する（負けを最小化する）戦略の仮説は「得意領域への集中と選択」「ニッチ戦略」「負ける勝負を意図的に回避」この３つ
    - 業務領域の集中と選択のための戦略
        - クラウドアーキテクチャの知識を深める：AWS認定資格（ソリューションアーキテクト プロフェッショナルなど）を取得する。
            - リアリティ・スイッチ
                - AWS上でのアーキテクチャ設計のプロ。
                - AWSなのだから、AWSのサービスを使って設計する。
                    - AWSのサービスも多様
                    - 種類
                        - コンピューティング
                        - ストレージ
                        - データベース
                        - ネットワーキング
                        - セキュリティ
                        - データアナリティクス
                        - マシンラーニング
                        - コミュニケーション
                - アーキテクチャ設計といえば、６つの柱
                    - パフォーマンス効率
                    - コスト最適化
                    - セキュリティ
                    - 信頼性・可用性
                    - 運用上の優秀性
                    - 持続的
                - 試験だから、時間制限があり、テストの特徴がある。
                    - 一定時間内に一定の量の質問に正解することで、AWSアーキテクトとしての知識を備えていることを証明する。
                    - 時間制限
                        - 180分
                    - 問題数
                        - 75問
                    - 総得点
                        - 1000点満点 
                    - 合格ライン
                        - 1問当たりの平均時間は2分24秒
                        - 751/1000点(750点がボーダー)
                        - 57問以上正解で合格
                - ベストプラクティスに沿った形の選択肢が答えになることがほとんど
        - プロジェクトマネジメントのスキルを習得：アジャイル手法の学習、あとは、論点を研ぐ、作業分解、スケジュール提案、品質管理を徹底
        - 作業分解・スケジュール提案と品質管理（リリース判定報告書の背景と要約に対するコメント）
            - 背景や変更内容をそのまま受けとり、影響範囲、テスト内容、当日の作業内容などに懸念点を言語化して伝える
    - 勝ち確率を最大化する戦略の仮説
        ・勝ち確率を最大化する戦略
                ・得意領域への集中と選択
                ・ニッチ戦略。
                ・負ける勝負を回避
                    ・生成AIへの開発側で関与しすぎないように注意
                    ・無関心・消極的関与を避けるユーザ側として関わる
                    ・現場の競争率は高いので、参画するなら役目をPMレイヤーにシフトする
                    ・AWS特化型の人材と、ジュニア層の境界をうまく狙う

    - 世の中のニーズで人口減少課題に取り組んでいる領域に個人が関与できる需要が存在すると言う仮説
        ・人口が減少していて人手が足りないのと、人口減少課題にうまく対処するサービスを提供しようとしているのとでは勝手がちがう
            ・後者に個人が関与できる需要がある保証はない
            ・しかし、人口減少課題への対処が急務であることは事実。2025年問題の一環で内部統制やシステム移管の課題の一部なら、取り入る隙があるかも。

    - 生成AIへのユーザ側として関わるスタンスがベターだという仮説（生成AIへの開発側での関与が困難、無関心・消極的関与が致命的だという仮説）。
        ・生成AIへの開発側での関与が困難
            ・既存のプレイヤーは、市場のニーズを掴むのが自分より上手く、横のつながりも多い起業家と、古くから機械学習をやっている人材、書籍の出版や登壇など積極的な活動家が多い
        ・無関心・消極的関与が致命的だという仮説
            ・生産性が相対的に下がりやすい
            ・生成AIを適切に活用した人が得られるサービスのビルド。基本品質達成までのリードタイムの大幅短縮といったメリットが得られない
            ・ハルシネーションを気づかずに踏んでしまうリスク
            ・イネーブルメントの効果が得られない

    - AWSのAIサービスがあまり使われないと言う仮説
        - AWSの新規開発系案件は停滞しているので望みは薄い
        - AWS特化型の人材と、ジュニア層の境界をうまく狙う
            - 持続可能か？
        - 既存の特に大手法人の継続的需要は、内製人材が盤石なことが多いと予想
            - 現場の競争率は高いので、参画するなら役目をPMレイヤーにシフトするなど
- AI駆動開発といえど、システム開発要件定義の分類は重要。既存システム改修と新規開発。
    - 既存システム改修の基本特性は、現状把握と規模の増大に比例して指数的に上がる保守難易度。
        - 大規模な場合
            - 高度なレベルでのシステムが必要になる
            - 業務の概念図の管理が必要になる
        - 経験の差が、生成AIのメリットを享受できるかマイナスの効果をもたらすかを左右することもありそう
    - 逆に新規開発
        - 特に初期の計画段階では多くの変数と不確実性が存在し、確度の低い仮説の積み上げになりやすい
        - 要件定義の内容は頻繁に変更される

- AI駆動開発における要件定義という概念の議論を見かけたので要点を簡単におさらいする
    - 1.コアコンセプトの提示
        - 要件定義自体は柔軟な概念。ユーザーストーリー的なものだったり、設計仕様書により近いものだったりもする。
        - やりたいことやコンセプトを自然言語化し、AIに理解させる訓練を行う
    - 2.変更管理
        - 意思決定事項は、ADR(Architecture Decision Record)を活用
        - 生成AIツールを活用して、MTGの議事録を効率的に記録し、後から検索できるようにする
        - Notionなどドキュメント管理システムを活用している場合、生成AIの学習データとして以前の要件定義書を活用することも、継続的な要件変更への備えになると思う
        - 信頼性を高めるために、プロンプトの履歴管理やフィードバック管理もやった方が良い
    - 3.設計・開発フェーズとの隔離
        - 設計や開発のフェーズと疎結合とするには、要件定義の成果物で開発が実施できることが必要
    - 4.成果物の評価指標と期間確保
        - AI駆動開発へのシフトが進むにつれ、自動化されたプロセスで生み出されたプロダクトを評価する期間や指標

- システムの種類による傾向・技術スタックによる傾向の違い
    - 自分のやってきた分野で考えを整理しておきたい

- AI駆動開発に切り替わる場面でも、実力を発揮するために、生成AI製品と既知のデザインパターンを適切に活用する。
    - ユースケースごとにメジャーな製品を２種
        * CursorのComposer 機能 https://note.com/japanmarketing/n/n9b47d35858c2
            * Codebase indexing
            * 実装したい機能: ユーザ管理機能
                * アーキテクチャ: t3stack
                * URLプレフィクス: users
                * ページ部品出力先のディレクトリ: frontend/app/
                * trpcサーバのプログラム出力先ディレクトリ:  app/api/配下
                * 要求コンテキストのレベルをあげよう、次に適切なフォーマットに変換しよう
        * bolt
        * v0
        * gemini
    - システムのデザインパターン(RAG)を知る
        - RAGの特徴
            - ベクトル検索機能または自然言語検索機能を用いて、ユーザーの入力から外部情報の検索を行い、大規模言語モデルの入力に含めることで、より正確な回答を生成する
                - RAGで用いられる検索方式
                    - ベクトル検索：単語の意味を捉え、関連する情報を見つけ出す方式
                        - 大規模言語モデルのプロバイダなどが提供するEmbedding APIを利用して、テキストをベクトル化し、ベクトルを任意のデータベースに保存する。
                        - ベクトルデータベースを検索し、適したデータを収集する
                    - 埋め込みベクトルへの変換は、大規模言語モデルのプロバイダが公開するAPIと、従来から存在するテキストのベクトル化アルゴリズムに依存している
                        - 従来から存在するテキストのベクトル化アルゴリズムといえば、Googleが開発した「Word2Vec」
                        - コンテキストウィンドウ内の単語の共起関係を学習し、単語をベクトル化するので、単語の意味を捉えることができる
                        - 一方、ドキュメント内の離れた単語の関連性を捉えることが難しい（文脈を十分に考慮できない）
                - 同社が開発した自然言語処理用の言語モデル「BERT」をベンチマークに、他社の言語モデルのEmbeding API性能を評価する考え方が市場に出回っている
                    - OpenAI の Embeddings API は他の手法に対して十分な性能を持っている
                    - キーワード検索：単語や文字列のパターンを照合し、類似度に応じて情報を見つけ出す方式
            - LLMに起こりがちな、事実に基づかない回答を生成する「ハルシネーション（幻覚）」という現象を回避することが期待される
                - 信頼できるデータベースやソースを検索させてその内容をコンテキストとして与えた上で回答することで、ハルシネーションを回避する
            - チャットボットや生成AIを活用することで人間の代替として機能すること、稼働の負担を下げる効果も期待される
                - 例：AIを活用した電話自動応対サービスとゴミ分別ガイドのチャットボットを並行で稼働したところ、人が応対する電話相談の件数が約15％減少したとの結果
                - つまり、チャットボットサービスはすでに人間の代替として機能しており、かつ、レッドオーシャンである可能性が高い
            - RAGのデメリット
                - ベクトル検索は開発コストが高い
                - キーワード検索はデータ量が増えると生成速度が低下する
                - 多くの場合は、それぞれの欠点を補う「ハイブリッド検索」の実装
                - 両方の機能を選択できるようなミドルウェア・プラットフォームを利用する
                - 開発コストのかからないキーワード検索を実装しつつ、生成処理速度を監視して、データ量が増えてきたタイミングでベクトル検索を実装する

        - GraphRAG
            - GraphRAGはLLMを用いてドキュメントから知識グラフを構築
                - GraphRAGを構築する前準備として先にグラフデータベースを作成する必要
                    - Neo4j Aura DBを使ってクラウド上のDBにローカルからアクセスする形式でグラフデータベースを利用
                    - Neo4jは、データを節（ノード）と関係（エッジ）として保存するグラフデータベース
            - GraphRAGの有用性について
                - Microsoft Researchチームによっていくつかの調査が行われています（RAGアプローチを要する質問に対して 従来のRAG手法による応答 と GraphRAGによる応答 出力結果を比較）
                - 前提
                    - 特定のタスクに特化した従来の機械学習モデルではなく、生成AIの検索拡張（RAG）との比較
                    - Few-shotプロンプトでのコンテキスト注入との比較ではなく、生成AIの検索拡張（RAG）との比較
                    - ReActプロンプトでのタスク遂行との比較ではなく、生成AIの検索拡張（RAG）との比較
                    - テキストベースのキーワード検索を使用したRAGではなく、ベクトル検索を使用したRAGとの比較
                    - データセットだけでなく、特殊なドメインのデータに対しても、効果的に対応する

# 2024年2月18日_生成AILangChainsAgentモジュール概要を学ぶ

## 時間

- 2/18 9:00-10:00(1h)

## 次のアクション

- LangChains使ってみる
  - LangChains Agentモジュール（定義済みモジュール）
  - Custom Agentを作る
    - 過去のデータではなくリアルタイムな情報が必要
    - 予測ではなく事実（正確な情報）が必要
    - 自社のリアルタイムなデータを生成AIが返すレスポンスに反映させたい
    - 推論ではなく正確な計算が必要
    - （クラウド上で完結するタスクではなく）生成AIを使っているユーザのローカル環境への操作が必要

- ファインチューニングにかかる時間と費用の相場を学ぶ
  - 1日毎がリアルタイムの範疇だとしたら、そのように短いスパンで行うことは実際には適当？
  - 費用対効果が合わない可能性がある。主に、データの準備。次に利用料金、そして、APIを実行する手間（あるいはファインチューニング実行のためのワークフローを用意する手間）

## やること

- LangChains Agentモジュール概要を学ぶ
    - LangChains Agentモジュールとは
      - ユーザが入力したタスクを
        - インターネットの情報検索が必要なタスクやローカルファイル出力が必要なタスク
          - ChatGPTのような生成AIが単独で完遂できないタスクを補助するエージェント的な役割
      - ツールを使い
        - 定義済みの4つのツール
            - LLMMath
              - 正確な計算
            - Requests
              - APIリクエストを行う
            - FileSystemTools
              - ファイル操作を行う
            - SerpAPI
              - GoogleやBing検索を行う
      - ReAct方式で実行
        - 生成AIに次の行動(action)の提案を求める
        - 生成AIからJSON形式で次のアクションの情報が返される
        - 確か定数が３つあったような

## 検討

- ChatGPTのような生成AIが単独で完遂できないタスク（あるいは苦手とするタスク）は確かに存在する。そのようなタスクはいくつ存在するか。LangChains Agentモジュールを使う方法で問題解決を行うことができそうだということは理解した。
  - 過去のデータではなくリアルタイムな情報が必要
  - 予測ではなく事実（正確な情報）が必要
  - 自社のリアルタイムなデータを生成AIが返すレスポンスに反映させたい
  - 推論ではなく正確な計算が必要
  - （クラウド上で完結するタスクではなく）生成AIを使っているユーザのローカル環境への操作が必要

- 考えてみると、このようなタスクは、ビジネス上の仕事のほとんどの場合に１つ以上当てはまるかもしれない。
  - 実際の社会ではマイクロソフトのオフィス製品に組み込まれて使われていたり、Notionのようなツールに組み込まれて使われていたりする。

- ところでなぜAgentが必要なのか？
  - 生成AI、というよりは、普遍的なプログラミング（ファイル操作やHTTPリクエスト）の範疇のツールを生成AIのAPIに融合させたものだと理解した。
  - だとすると、なぜAgentが必要なのか？
  - 正確な計算やリアルタイムな（あるいは正確な事実）情報を元にしたタスクは、推論が得意な生成AIだけでは完結しづらい。
  - 一方で、実際にはほとんどの仕事で必要とされる。
  - 「推論（Reasoning）」と「行動（Acting）」を組み合わせるReAct手法、そして生成AI単独では実行できないタスクの一部分を補完するツールを組み合わせることで、人間の行動のように考えて振る舞うエージェントのような振る舞いを簡単に実現できるようにする。
  - そのようなことを意図して提供されていると理解した。あるいは、単に生成AIをソフトウェアに溶け込ませて使ってもらうための部品かもしれない。
  
- どのような時にLangChains Agentモジュールを使うべきなのか？
    - 生成AIが単独で遂行しづらいタスクの一部は、LangChains Agentモジュールを使わずとも解決できるのではないか。
      - 例えば正確な情報は、プロンプトエンジニアリングとファインチューニングでも解決できるのではないか。
        - プロンプトエンジニアリングについて
          - プロンプトを最適化し、例を掲示したり(FewShot)すればAIが自動的に対応できるか?
            - 今、OpenAIのAPIを使って、単独でインターネット検索を行うことはできるのか？を調べてみた。答えはNo
                - https://community.openai.com/t/chatgpt-can-now-access-the-live-internet-can-the-api/401928
                    - Chatgpt can access the live internet Can the API?
                    - How to archive
                        -  write a function 1.8k that the AI can call with an internet search query
                        - fulfill it by an external API to get search results.
                        - Plugins and browsing functions are implemented in “ChatGPT the APP” the same way as they would need to implemented in your “HotBot with AskJeeves”. 
        - ファインチューニングについて
          - リアルタイムなデータを生成AIが返すレスポンスに反映させたい場合
          - 独自の学習データを1日毎など短いスパンでAIに与えることで解決できるのではないか。
          - ファインチューニングが可能であっても、データの収集と学習に時間がかかる。
            - 1日毎がリアルタイムの範疇だとしたら、そのように短いスパンで行うことは実際には適当？
              - 1日毎だったら行ける気もする。
              - 費用対効果が合わない可能性がある。主に、データの準備。次に利用料金、そして、APIを実行する手間（あるいはファインチューニング実行のためのワークフローを用意する手間）
                - 効果的なアプローチではないと考える人がいるかもしれない。
          - また、必ずしもファインチューニング可能とは限らない。
        - インターネット検索はChatGPTのGPT4ではすでに実装されてる。これはどのように実現されている？Agentモジュールではないと思う
          - ChatGPTの場合plugins
          - Azure x OpenAIの場合 Azure Functions
          - コールバック関数を使った実現方法を聞いた気がする

- 定義済みのエージェントで解決できない問題に出くわすことはないか?
  - あるはず。使ってみる
    - LangChains Agentモジュール（定義済みモジュール）
    - Custom Agentを作る

- このような仕組みを実装するとしたら、クラウド上でどのような構成になるだろうか。
  - Azure x OpenAIだと　Azure Functionsを使う方法が紹介されてるのを見かけた

## 次のアクション

- LangChains使ってみる
  - LangChains Agentモジュール（定義済みモジュール）
  - Custom Agentを作る
    - 過去のデータではなくリアルタイムな情報が必要
    - 予測ではなく事実（正確な情報）が必要
    - 自社のリアルタイムなデータを生成AIが返すレスポンスに反映させたい
    - 推論ではなく正確な計算が必要
    - （クラウド上で完結するタスクではなく）生成AIを使っているユーザのローカル環境への操作が必要

- ファインチューニングにかかる時間と費用の相場を学ぶ
  - 1日毎がリアルタイムの範疇だとしたら、そのように短いスパンで行うことは実際には適当？
  - 費用対効果が合わない可能性がある。主に、データの準備。次に利用料金、そして、APIを実行する手間（あるいはファインチューニング実行のためのワークフローを用意する手間）

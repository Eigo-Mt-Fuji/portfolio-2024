# 2024年1月18日_SRE活動

## 時間

1/18 9:30-10:00(0.5h)
1/18 12:00-13:00(1.0h)
1/18 15:00-16:30(1.5h)

## やること

- 案件参画前にAWSを復習して脳内に記憶を充実させる
- AWS Builders onlineで データベースサービスの種類をおさらいする
- Amazon Bedrock・生成系 AI システムを構築するとは?（基盤モデルの選択肢・基盤モデル選択の観点）

## 備忘録

- 案件参画前にAWSを復習して脳内に記憶を充実させる
  - そもそもサービスがいくつある？・そのサービスどんな時に使うもの？
    - 特に、データベース・コンピューティングリソース・通知・バッチ・キャッシュ・ストレージについて。
      - **AWS Builders onlineで データベースサービスの種類をおさらいする**

  - SREとしての実力発揮するために脳内に記憶を充実させる   
    - 使ったことがあるか・ないかによって準備の仕方を工夫する
        - 使ったことある **使ったことあるサービスについては、一番得意な設計・構築方法と特に重要な設計ポイントを再確認しておく**
        - 使ったことない **使ったことないサービスについては、サービスの特徴をよく確認し、仮に設計・構築する場合に頼りになるドキュメントを仕入れておく**
    - AWSアーキテクトとしての実践経験を引き出せるようにする
        - 次の案件で最も重視されそうなアーキテクチャ特性は一体なんだろうか
            - 1. 性能
            - 2. 信頼性
            - 3. 運用しやすさ
            - 4. セキュリティ
            - 5. コスト・パフォーマンス
        - 参考: 「ソフトウェアアーキテクチャの基礎」本に掲載されてるアーキテクチャ特性（不完全リスト）
            - 運用特性
                - 可用性
                - 継続性（障害復旧能力）
                - 回復性（どれだけ早くオンラインに戻す必要があるか。バックアップ戦略とハードウェアの複製要件に影響する）
                - パフォーマンス
                - スケーラビリティ
                - 信頼性／安全性
                - 堅牢性
            - 構造特性
                - 構成容易性（エンドユーザが設定を簡単に変更できる） 
                - インストール容易性
                - 拡張性
                - 活用性／再利用性
                - メンテナンス容易性
                - アップグレード容易性
                - ローカライゼーション（他言語に対応しているか）
                - 可搬性（複数プラットフォームで動作する必要あるか）
            - 横断的特性
                - アクセシビリティ
                - 長期保存性
                - 認証
                - 認可
                - 合法性
                - プライバシー
                - セキュリティ
                - サポート容易性
                - ユーザビリティ／達成容易性

        - システム構成を考えるとしたら、どんなところに着目する？
            - **システム構成を考えるとしたら、どんなところに着目するか、着眼点を整理しておく。その１：まず１つ要求を満たす構成を考える: 過去経験のある（あるいは著名な既成の）システム構成を適用可能か考える？（適用することで解決できる類の要求か？）**
              - リクエストベースアーキテクチャ
                - APIGateway - Lambda
                - Appsync - Lambda
                - ALB - Lambda
                - CloudFront
                - サーバレス
                - コンテナ
                - 仮想マシン
              - パイプラインアーキテクチャ
                - ⚪︎⚪︎パイプライン
                  - データパイプライン
                    - DataPipeline - EC2 - S3 - EMR
                        - すべてのデータパイプラインが ETL シーケンスに従うわけではありません。ソースからデータを抽出し、変換せずに他の場所にロードするデータパイプラインもあります
                          - ETLパイプラインではないデータパイプライン
                            - ソースからデータを抽出し、変換せずに他の場所にロードする
                          - ETLパイプラインであるデータパイプライン
                            - 抽出、ロード、変換 (ELT) シーケンスに従う
                            - 非構造化データを抽出してデータレイクに直接ロードする
                            - 情報をクラウドデータウェアハウスに移動した後に変更を行います
                  - リアルタイムメディアパイプライン
                    - Chime SDK Media Pipeline
                  - リアルタイムストリーミングパイプライン
                    - Amazon Kinesis Data Firehose
                      - リアルタイムストリームをデータレイク、ウェアハウス、分析サービスに確実にロードする
                  - リーミングデータを確実にキャプチャおよび変換し、データレイク、データストア、および分析サービスに配信する、抽出、変換、ロード (ETL) サービス
                - Amazon Kinesis Data Streams
              - イベント駆動アーキテクチャ
                - EventBridge - Lambda
                - S3 - Lambda
                - SQS - Lambda
                - StepFunctions - Lambda
              - イベントソーシング
                - NoSQL データソース
                - StepFunctions EMR
              - マイクロサービスアーキテクチャ

            - **システム構成を考えるとしたら、どんなところに着目するか、着眼点を整理しておく。その２：使いそうなサービス・関連する設定項目を想起しつつ活用を考える**
            - **要求を満たす構成内での最適化を考える: できる限り網羅敵に選択肢を上げて比較する**
              - 6つの柱
                - 運用上の優秀性
                - セキュリティ
                - 信頼性
                - パフォーマンス効率
                - コスト最適化
                - サステナビリティ
              - AWS以外のサービス
                - GCP
                - Azure
                - Vercel
                - Sendgrid（メール）
                - Datadog（モニタリング）
                - Twilio（SMS）
                - CircleCI(継続的デプロイメント)
        - アプリケーション構成・設計を考えるとしたら、どんなところに着目する？
            - **まず１つ要求を満たす構成を考える: 要求を満たすフレームワーク・ライブラリをさがし、要求を満たせない要素の存在しないことを確認する**
            - **要求を満たす構成内での最適化を考える: 可能な限り選択肢を挙げる**
            - **要求を満たす構成内での最適化を考える: フレームワーク・ライブラリの選択基準に基づいて選ぶ**
    - そもそも、案件参画してから自分ができる貢献パターンはいくつ存在するのか
        - 言語化・構成図可視化
        - 負荷試験 **負荷試験するとしたら、どんなところに着目して、どのような進め方・目標で実施する?**
        - システム構成変更の検討・アプリケーションプログラム解析・改修 **アプリケーションプログラム解析のチェック項目おさらいした？アプリケーションからAWS操作する場合、PythonとGoそれぞれのライブラリの所在、ちゃんとわかる？**
        - IAMロール・ポリシーの改善・最適化 **AWSサービスのIAM設定箇所がいくつある。よくある注意点。よくある設定**
        - コスト削減 **コスト削減など運用改善するとしたら、どんな情報をもとにどんなアプローチで改善する？コスト削減の現在のベストプラクティスは?**
        - SLI・SLO提案または改善/ダッシュボードメンテナンス **Datadogの準備は万端?**
        - CI／CDの見直し **今はやりのCI/CDってどれだ?Github Actionか**
        - DB設計修正 **DB設計のベストプラクティス・アンチパターンを復讐する**

- AWS Builders onlineで データベースサービスの種類をおさらいする
    - パーパスビルド（適材適所の選択）
        - SQL
            - リレーショナル Aurora RDS
        - NoSQL
            - キーバリュー DynamoDB
            - ドキュメント DocumentDB
            - インメモリ ElastiCache, MemoryDB
            - グラフ Neptune
            - 時系列 Timestream
            - 台帳 QLDB
            - ワイドカラム Cassandra
    - ChatGPTに聞いてみる
        - それぞれのサービスについて
            - 特徴
            - 実際に使ってみる場合の参考サイトURL
        - プロンプト
            - [ChatGPT: AWS NoSQLデータベースサービス特徴 January 18, 2024](https://chat.openai.com/share/175eb7a8-76c3-4be6-8e1b-453db841d772)

```
あなたはAWSのスペシャリストです。

データベースサービスの種類をおさらいするため、
以下の[NoSQLサービス]について、特徴と実際に使ってみる場合の参考サイトURL、AWS公式のユーザガイドURLを教えてください。

[NoSQLサービス]
# SQLかNoSQLか,パーパスビルド(適材適所の選択をするえでの分類),AWSサービス名
SQL,リレーショナル,Aurora または RDS
NoSQL,キーバリュー,DynamoDB
NoSQL,ドキュメント,DocumentDB
NoSQL,インメモリ,ElastiCache または MemoryDB
NoSQL,グラフ,Neptune
NoSQL,時系列,Timestream
NoSQL,台帳,QLDB
NoSQL,ワイドカラム,AWS Cassandra
```

- Amazon Bedrock と出会い、生成系 AI システムを構築するとは?（基盤モデルの選択肢・基盤モデル選択の観点）
  - 基盤モデルの選択肢
    - AI21labs Jurassic-2
    - ANTHROP\C Claude 2.1 & Claude Instanct
    - co:here Command & Embed
    - ♾️MetaAI Llama 2
    - stability.ai Stable Diffusion XL 1.0
    - amazon Amazon Titan

  - 基盤モデル選択の観点
    - 基盤モデルの特徴
        - 出力分の質
        - 推論時間
        - 料金
    - 用途(ユースケース)
        - 画像１枚あたり１−２円で作成される
        - Excelのマクロを生成するプロンプト
        - 要約 `要約やチャットボットのような簡易なものはClaude Instantを使うと、レスポンスが早く安い`
        - チャットボット `要約やチャットボットのような簡易なものはClaude Instantを使うと、レスポンスが早く安い`

## 次のアクション

- システム構成を考えるとしたら、どんなところに着目するか、着眼点を整理しておく。
  - まず1つ要求を満たす構成を考える
    - 過去経験のあるシステム構成を適用可能か考える（適用することで解決できる類の要求か？）
    - 著名な既成システム構成を適用可能か考える
    - 使えそうなサービス・関連する設定項目を想起しつつ活用を考える
        - 使ったことあるサービスについては、一番得意な設計・構築方法と特に重要な設計ポイントを再確認しておく
        - 使ったことないサービスについては、サービスの特徴をよく確認し、仮に設計・構築する場合に頼りになるドキュメントを仕入れておく
  - 要求を満たす構成内で最適化を考える
    - できる限り網羅敵に選択肢を上げて比較することを考える

- 負荷試験するとしたら、どんなところに着目して、どのような進め方・目標で実施する

- アプリケーションプログラム解析のチェック項目おさらい

- アプリケーションからAWS操作する場合、PythonとGoそれぞれのライブラリの所在を整理しておく

- コスト削減など運用改善するとしたら、どんな情報をもとにどんなアプローチで改善する？コスト削減の現在のベストプラクティスは

- AWSサービスのIAM設定箇所がいくつある。よくある注意点。よくある設定

- Datadogの準備を進める

- ~~今はやりのCI/CDってどれだ?Github Actionか~~


# 

## 時間

- 8/3 12:00-15:30(3.5h)


## やること

- 能力開発を考える
  - 暗記する戦略思考 -> リアリティ・スイッチ・フチドリ思考
  - 論点を研ぐ → 前提を自覚する・前提を問い直す・再構築
  - 効率的なGo -> RAER（リソースを考慮した性能要件）
  - ソフトウェアアーキテクチャ基礎 -> アーキテクチャ特性（優先アーキテクチャ特性)の概念
  - AWSソリューションアーキテクトプロフェッショナル -> アーキテクチャ・デシジョン・レコードへの反映,認定試験受験の効用（体感）

## 備忘録

```
・テスト駆動の基本を復習しておく
  ・論点
    ・ビジネスでは、原則事実に基づく、テスト駆動型のアプローチで仕事に取り組む（解決すべき課題、状況、及び、依頼主との信頼関係を考慮し、必要に応じて仕組みや推論に基づく相談・提案を行う）
  ・対応案
    ・テスト駆動の基本を復習しておく

・認定資格を受験
  ・論点
    素養を効率よく高め、客観的に見えるようにする方法はあるだろうか？ 
  ・対応案
    AWS Certified Machine Learning Engineer - Associate があるよ。8/13以降ベータ受験可能らしい
        ML モデルのためのデータ準備
        特徴量エンジニアリング
        モデルトレーニング
        モデルのパフォーマンスとメトリクス
        モデルの統合とデプロイ
        パフォーマンスとコストの最適化
        セキュリティ

・外部検索拡張型生成AI（RAG）構築実践
  ・論点
　　　　　　　　　・RAGを作ると何いいことある？
        ・生成AIが仕事の前提になる→外部データと繋げたくなる→検索拡張（RAG）→外部検索拡張型生成AI（RAG）をどう構築し、管理するか
          ・ベンダーが提供する大規模言語モデル(LLM)の標準の推論も精度が高まっているし、オープンソースのLLMやローカルLLMなど選択肢も多い。一方で、課題もある。
　　　　　　　　　　　　　　　　　　　　　　　・仮説: 数値化（計算）を求める問い合わせ、複雑な依存関係や推論を伴う問い合わせに対する生成AIのレスポンスは、期待と異なる場合も多少ありそう。
　　　　　　　　　　　　　　　　　　　　　　　・仮説: 強化学習はデータを整備する手段が曖昧だったり、コストが高く採算が合わないと考えられているのでは。
　　　　　　　　　　　　　　　　　　　　　　　　　・仮説: オープンソースや提供されているLLMを利用する前提で導入することが多い。
　　　　　　　　　　　　　　　　　　　　　　　・仮説: コンプライアンス・セキュリティ・内部統制上の懸念から、安易にLLMの利用・接続・自社のデータを使った拡張は行えない環境が多いのでは
　　　　　　　　　　　　　　　　　　　　　　　　　・仮説: 企業が持つ情報資源と隔離し、安全にLLMと接続するアプローチが必要。
　　　　　　　　　　　　　　　・企業独自のデータベースや、検索サービスと繋げるためのアーキテクチャ構造が必要。
　　　　　　　　　　　　　　　　　・外部検索拡張型生成AI（RAG）をどう構築し、管理するか
    ・そこで実践課題を考えてみた（後述）。書いてみてなんだがいきなり応用すぎる。もうちょっと基本的かつ短時間で実践できるやつはないか？
        ・非同期のバックエンド処理プログラムとしても、同期型Web APIの一部としても利用可能な外部検索拡張（RAG）アプリケーション
           ・Pythonか？
　　　　　　　　　　　　　　　　　　　　　　・DB
　　　　　　　　・実践課題を考えてみた（複雑すぎてボツ）
        ・観点
            ・どの生成AI（LLM)と繋げるか。他のLLMでも通用するか
            ・コスト。より安く仕上げることは可能か？
            ・企業独自のデータベースや、検索サービスと繋げる。アーキテクチャ構造の具体化。
        ・成果物
          　　アプリケーションプログラム
          　　ローカル実行環境
           レポート
        ・設計
            ・FP
                ・隊列のパターンと人のリストから、最適な隊列を生成する（進化：隊列の移動をシミュレーションする）
                　　・入力プロンプトの開発
                　　・隊列データベース
                　　・データ構造にマッピングする
                ・美味しいもの画像データと依頼文から⚪︎⚪︎を生成する（進化：美味しいもの画像データからレシピと手順、時間、調理器具）

            ・RAER（Resource-Aware Efficiency Requirements）
                ・メモリ: 128MB
                ・レスポンスタイム: 1秒以内
            ・PAP（Prior-Architectural Property, 優先アーキテクチャ特性）
                どのアーキテクチャ特性を優先するかは環境によって異なる。
                    規制業種
                        信頼性・耐久性
                        セキュリティ
                        運用・互換性
                    サービス業
                        コスト
                        パフォーマンス
                        オブザーバビリティ
                        運用の最適化（事業や開発の妨げにならない）
                        最低限のセキュリティ
                        持続性（≒モダンな技術の採用）
            ・ADR（Architectural Decision Records, アーキテクチャ決定記録）
                ・非同期型Web API x バックグラウンド処理タイプ
                　　・入力受付API（非同期型 Web API）
                　　　受付時に処理中ステータスでジョブを記録し、バックグラウンドでRAGを実行する。RAGは入力受付APIから取得したプロンプトをもとにLLMへの問い合わせと、専用のコールバック関数を介したLLM問い合わせ結果の加工を行い、結果をジョブのステータスに反映する
                　　・結果確認API
                　　・バックエンドワーカープログラム（外部検索拡張（RAG)本体）
                　　・そして、外部検索拡張（RAG)のための問い合わせ用Web APIの４つを開発する

                ・入力受付APIはREST APIとして実装する

                ・結果確認APIはGraphQL APIとして実装する

                ・外部検索拡張（RAG)のための問い合わせ用Web APIは標準化されたAPI仕様を採用したい。
                　・GraphQLインターフェースで柔軟性を持たせるのは？
                    （GraphQLインターフェースは、クエリの柔軟性が高いが、理解している人材が少ない）
                　・独自のREST APIは、開発工数がかかるので回避したい
                    （アプリケーションのメンテナンス）
                　・Lambda関数を直接コールする方法でも呼び出し方法を固定することは可能。ただ、プラットフォーム依存が発生する。処理時間が15分までと限定的なので管理が必要
                    （FargateやEC2などへの移行が必要になる）

                ・ジョブはキーバリュー型の永続化ストレージに保存する。
                　　・リアルタイム性を重視。固定費がなるべくかからないエンジンを選択する。

                ・外部検索拡張（RAG）は非同期のバックエンド処理プログラムとしても、同期型Web APIの一部としても利用可能にする
                    ・アプリケーションの一連の処理が同期処理の制限時間（3秒程度　ー 最大30秒）で実行可能な範囲であることを保証する必要があるが、その分仕組みが簡潔になるので、応答速度次第では同期型Web APIとして提供する
                    ・同期型APIの応答速度は、認証・バリデーション、生成AIのレスポンスタイム、応答後の外部検索拡張（RAG)のレスポンスタイムと永続化にかかる時間、リトライの遅延などAPIの処理全体を考慮する
```
